var writeToUs=document.querySelector(".contacts .link"),writeUs=document.querySelector(".write-us"),close=writeUs.querySelector(".modal-close"),overlay=document.querySelector(".overlay"),form=writeUs.querySelector("form"),login=document.querySelector(".write-us .name input"),email=writeUs.querySelector(".email input"),textarea=writeUs.querySelector(".message textarea"),isStorageSupport=!0;try{loginStorage=localStorage.getItem("login"),emailStorage=localStorage.getItem("email"),textStorage=localStorage.getItem("textarea")}catch(e){isStorageSupport=!1}writeToUs.addEventListener("click",function(e){e.preventDefault(),overlay.classList.add("overlay-show"),writeUs.classList.add("modal-show"),emailStorage&&loginStorage?(login.value=loginStorage,email.value=emailStorage,textarea.focus()):login.focus()}),close.addEventListener("click",function(e){e.preventDefault(),overlay.classList.remove("overlay-show"),writeUs.classList.remove("modal-show"),writeUs.classList.remove("modal-error")}),form.addEventListener("submit",function(e){login.value&&email.value&&textarea.value?isStorageSupport&&(localStorage.setItem("login",login.value),localStorage.setItem("email",email.value),localStorage.setItem("textarea",textarea.value)):(e.preventDefault(),writeUs.classList.remove("modal-error"),writeUs.offsetWidth=writeUs.offsetWidth,writeUs.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),writeUs.classList.contains("modal-show")&&(overlay.classList.remove("overlay-show"),writeUs.classList.remove("modal-show"),writeUs.classList.remove("modal-error")))});var map=document.querySelector(".map"),mapClose=map.querySelector(".modal-close"),img=document.querySelector(".contacts img");img.addEventListener("click",function(e){e.preventDefault(),overlay.classList.add("overlay-show"),map.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),overlay.classList.remove("overlay-show"),map.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),map.classList.contains("modal-show")&&(overlay.classList.remove("overlay-show"),map.classList.remove("modal-show")))});
